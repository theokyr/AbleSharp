<UserControl
    x:Class="AbleSharp.GUI.Views.TimelineTrackView"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:canvas="clr-namespace:Avalonia.Controls;assembly=Avalonia.Controls"
    xmlns:vm="clr-namespace:AbleSharp.GUI.ViewModels"
    Height="60">

    <Grid ColumnDefinitions="100, *">
        <!-- Left: The track label -->
        <Border Grid.Column="0" Background="#333" Padding="5" CornerRadius="2">
            <TextBlock Text="{Binding TrackName}" Foreground="White" VerticalAlignment="Center" />
        </Border>

        <!-- Right: Canvas with clips. 
             We rely on TimeToPixelConverter in each Border's binding to place it. -->
        <Border Grid.Column="1" Background="#222" Padding="2" CornerRadius="2">
            <ItemsControl ItemsSource="{Binding Clips}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <Canvas />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>

                <ItemsControl.ItemTemplate>
                    <DataTemplate DataType="vm:ClipViewModel">
                        <Border
                            Background="SteelBlue"
                            Height="30"
                            CornerRadius="2"
                            canvas:Canvas.Left="{Binding Start, Converter={StaticResource TimeToPixelConverter}}"
                            Width="{Binding Length, Converter={StaticResource TimeToPixelConverter}}">
                            <TextBlock Text="{Binding ClipName}" Margin="5" Foreground="White" />
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
        </Border>
    </Grid>
</UserControl>